os:
  - osx

osx_image: xcode8

sudo: required

language: objective-c

branches:
  only:
    - master

before_install:
  - brew update
  - brew upgrade
  - brew reinstall xz --universal
  - brew reinstall libpng --universal
  - brew install freetype --universal
  - brew install jpeg --universal
  - brew install libtool --universal
  - brew install wine --HEAD --with-libgsm --with-samba
  - brew install autoconf
  - brew install automake
  - brew install pkg-config
  - brew install mono
  - brew install makensis
  - gem install fpm

install:
  - export PATH=~/bin:$PATH
  - git clone https://github.com/creationix/nvm.git /tmp/.nvm
  - source /tmp/.nvm/nvm.sh
  - nvm install 6.2.2
  - nvm use 6.2.2
  - npm prune --verbose
  - npm install --verbose

script:
  - npm run pack --verbose

cache:
  directories:
    - ./node_modules
    - /usr/local/Cellar

notifications:
  email: false
  webhooks:
    - https://webhooks.gitter.im/e/b3225bd958673b2d9f82
